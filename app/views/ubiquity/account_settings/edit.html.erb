
<% content_for :page_header do %>
 <h1> <%= link_to "Back",  admin_account_settings_path, class: "btn btn-xs btn-default" %></h1><br>
  <h1><span class="fa fa-gears"></span> Editing Account Settings</h1>
<% end %>

<div class="row">
  <div class="col-md-12">
    <div class="panel panel-default account-form">
      <%= form_for(@account, url: admin_account_setting_path(@account), :html => { class: 'form control' }) do |f| %>
        <div class="panel-body">
          <% if @account.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@account.errors.count, "error") %> prohibited this account from being saved:</h2>
              <ul>
                <% @account.errors.messages.each do |key, messages| %>
                  <li><%= key %> &quot;<%= @account.errors.details[key].first[:value] %>&quot; <%= messages.join(' and ') %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="form-group">
            <%= f.fields_for :settings do |ff| %>
              <%= ff.label :email %><br>
              <%= ff.text_field :contact_email, :value => @account.contact_email, class: 'form-control' %><br>
              <%= ff.label :weekly_email_list %><br>
              <%= ff.text_field :weekly_email_list, :value => current_account.settings["weekly_email_list"], name: "#{f.object_name}[settings][weekly_email_list][]", class: 'form-control' %><br>
              <%= ff.label :monthly_email_list %><br>
              <%= ff.text_field :monthly_email_list, :value => current_account.settings["monthly_email_list"], name: "#{f.object_name}[settings][monthly_email_list][]", class: 'form-control' %><br>
              <%= ff.label :yearly_email_list %><br>
              <%= ff.text_field :yearly_email_list, :value => current_account.settings["yearly_email_list"], name: "#{f.object_name}[settings][yearly_email_list][]", class: 'form-control' %><br>
              <b><%= ff.label 'Index record to shared search' %></b><br>
              <p> True: newly added/edited works will appear in Shared Search</p>
              <p>False: newly added works will NOT appear in Shared Search</p>
              <p>If you change this setting, please contact Ubiquity Press in order to apply the change to existing works.</p> 
              <%= ff.select :include_in_shared_search, options_for_select(['true', 'false'], @account.settings['include_in_shared_search']), class: 'form-control' %>

            <% end %>
          </div>

        </div>
        <div class="panel-footer">
          <%= f.submit class: 'btn btn-primary pull-right' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
